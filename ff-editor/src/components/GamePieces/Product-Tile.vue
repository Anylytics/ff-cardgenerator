<template>
  <svg
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:cc="http://creativecommons.org/ns#"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:svg="http://www.w3.org/2000/svg"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    width="81.634796mm"
    height="53.412571mm"
    viewBox="0 0 289.25715 189.25714"
    v-bind:id="identifier"
    version="1.1"
  >
    <defs id="defs4159" />
    <metadata id="metadata4162">
      <rdf:RDF>
        <cc:Work rdf:about="">
          <dc:format>image/svg+xml</dc:format>
          <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
          <dc:title></dc:title>
        </cc:Work>
      </rdf:RDF>
    </metadata>
    <g id="layer1" transform="translate(-51.085713,-37.733636)">
      <rect
        style="opacity:1;fill:#ffffff;fill-opacity:1;stroke:#2f3640;stroke-width:6.4000001;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
        id="rect4705"
        width="282.85715"
        height="182.85715"
        x="54.285713"
        y="40.933636"
        rx="37.142857"
        ry="37.142857"
      />
      <rect
        style="opacity:1;fill:#e1b12c;fill-opacity:1;stroke:none;stroke-width:6.99526358;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
        id="rect4236"
        width="52.886784"
        height="177.57874"
        x="100.87378"
        y="43.37537"
        rx="0"
        ry="0"
      />
      <circle
        r="19.603743"
        cy="183.31953"
        cx="193.70203"
        id="six"
        style="opacity:1;fill:#000000;fill-opacity:0;stroke:#d3d7de;stroke-width:5.14091825;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:5.14091816, 15.42275446;stroke-dashoffset:0;stroke-opacity:1"
      >
        <title id="title4868">(2,0)</title>
      </circle>
      <circle
        style="opacity:1;fill:#000000;fill-opacity:0;stroke:#d3d7de;stroke-width:5.14091825;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:5.14091816, 15.42275446;stroke-dashoffset:0;stroke-opacity:1"
        id="eight"
        cx="295.6167"
        cy="183.31953"
        r="19.603743"
      >
        <title id="title4872">(2,2)</title>
      </circle>
      <circle
        r="19.603743"
        cy="183.31953"
        cx="244.65936"
        id="seven"
        style="opacity:1;fill:#000000;fill-opacity:0;stroke:#d3d7de;stroke-width:5.14091825;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:5.14091816, 15.42275446;stroke-dashoffset:0;stroke-opacity:1"
      >
        <title id="title4870">(2,1)</title>
      </circle>
      <circle
        r="19.603743"
        cy="193.70203"
        cx="-81.404877"
        id="zero"
        style="opacity:1;fill:#000000;fill-opacity:0;stroke:#d3d7de;stroke-width:5.14091825;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:5.14091816, 15.42275446000000017;stroke-dashoffset:0;stroke-opacity:1;image-rendering:auto"
        transform="matrix(0,-1,1,0,0,0)"
      >
        <title id="title4856">zero</title>
      </circle>
      <circle
        style="opacity:1;fill:#000000;fill-opacity:0;stroke:#d3d7de;stroke-width:5.14091825;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:5.14091816, 15.42275446;stroke-dashoffset:0;stroke-opacity:1"
        id="three"
        cx="-132.3622"
        cy="193.70203"
        r="19.603743"
        transform="matrix(0,-1,1,0,0,0)"
      >
        <title id="title4862">(1,0)</title>
      </circle>
      <circle
        r="19.603743"
        cy="81.404877"
        cx="295.6167"
        id="two"
        style="opacity:1;fill:#000000;fill-opacity:0;stroke:#d3d7de;stroke-width:5.14091825;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:5.14091816, 15.42275446;stroke-dashoffset:0;stroke-opacity:1"
      >
        <title id="title4860">(0,2)</title>
      </circle>
      <circle
        style="opacity:1;fill:#000000;fill-opacity:0;stroke:#d3d7de;stroke-width:5.14091825;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:5.14091816, 15.42275446;stroke-dashoffset:0;stroke-opacity:1"
        id="one"
        cx="244.65936"
        cy="81.404877"
        r="19.603743"
      >
        <title id="title4858">(0,1)</title>
      </circle>
      <circle
        transform="matrix(0,-1,1,0,0,0)"
        r="19.603743"
        cy="295.6167"
        cx="-132.3622"
        id="five"
        style="opacity:1;fill:#000000;fill-opacity:0;stroke:#d3d7de;stroke-width:5.14091825;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:5.14091816, 15.42275446;stroke-dashoffset:0;stroke-opacity:1"
      >
        <title id="title4866">(1,2)</title>
      </circle>
      <circle
        style="opacity:1;fill:#000000;fill-opacity:0;stroke:#d3d7de;stroke-width:5.14091825;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:5.14091816, 15.42275446;stroke-dashoffset:0;stroke-opacity:1"
        id="four"
        cx="-132.3622"
        cy="244.65936"
        r="19.603743"
        transform="matrix(0,-1,1,0,0,0)"
      >
        <title id="title4864">(1,1)</title>
      </circle>
      <text
        xml:space="preserve"
        style="font-style:normal;font-weight:normal;font-size:40px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
        x="196.46887"
        y="21.743965"
        id="text4242"
      >
        <tspan id="tspan4244" x="196.46887" y="21.743965" />
      </text>
      <g transform="translate(-3.0294751,0.49475145)" id="g4748">
        <g transform="translate(0,0.1755639)" id="g4274">
          <g id="g4258" transform="translate(-11.875298,57.94006)">
            <g id="g4646" transform="translate(-0.27798054)">
              <g id="g4660">
                <text
                  xml:space="preserve"
                  style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:condensed;font-size:43.22492981px;line-height:125%;font-family:Impact;-inkscape-font-specification:'Impact Condensed';letter-spacing:0px;word-spacing:0px;fill:#2f3640;fill-opacity:1;stroke:none;stroke-width:1.08062327px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
                  x="-162.60257"
                  y="24.737106"
                  id="text4238"
                  transform="matrix(-1,0,0,1,0.2779807,8.2601048e-8)"
                >
                  <tspan
                    style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:'Routed Gothic Wide';-inkscape-font-specification:'Routed Gothic Wide';stroke-width:1.08062327px"
                    id="tspan4240"
                    x="-162.60257"
                    y="24.737106"
                  >
                    S
                  </tspan>
                </text>
                <path
                  id="path4246"
                  d="m 142.27193,-9.8461594 v 3.675233"
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                />
                <path
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                  d="m 148.03122,-9.8461594 v 3.675233"
                  id="path4642"
                />
                <path
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                  d="m 142.27193,23.875135 v 3.675233"
                  id="path4648"
                />
                <path
                  id="path4650"
                  d="m 148.03122,23.875135 v 3.675233"
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                />
              </g>
              <g id="g4674">
                <text
                  transform="matrix(-1,0,0,1,0.2779807,8.2601048e-8)"
                  id="text4664"
                  y="24.737106"
                  x="-162.60257"
                  style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:condensed;font-size:43.22492981px;line-height:125%;font-family:Impact;-inkscape-font-specification:'Impact Condensed';letter-spacing:0px;word-spacing:0px;fill:#2f3640;fill-opacity:1;stroke:none;stroke-width:1.08062327px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
                  xml:space="preserve"
                >
                  <tspan
                    y="24.737106"
                    x="-162.60257"
                    id="tspan4662"
                    style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:'Routed Gothic Wide';-inkscape-font-specification:'Routed Gothic Wide';stroke-width:1.08062327px"
                  >
                    S
                  </tspan>
                </text>
                <path
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                  d="m 142.27193,-9.8461594 v 3.675233"
                  id="path4666"
                />
                <path
                  id="path4668"
                  d="m 148.03122,-9.8461594 v 3.675233"
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                />
                <path
                  id="path4670"
                  d="m 142.27193,23.875135 v 3.675233"
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                />
                <path
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                  d="m 148.03122,23.875135 v 3.675233"
                  id="path4672"
                />
              </g>
            </g>
          </g>
          <g transform="translate(-11.875298,188.13478)" id="g4264" />
        </g>
        <g id="g4710" transform="translate(0,129.58008)">
          <g transform="translate(-11.875298,57.94006)" id="g4706">
            <g transform="translate(-0.27798054)" id="g4704">
              <g id="g4688">
                <text
                  transform="matrix(-1,0,0,1,0.2779807,8.2601048e-8)"
                  id="text4678"
                  y="24.737106"
                  x="-162.60257"
                  style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:condensed;font-size:43.22492981px;line-height:125%;font-family:Impact;-inkscape-font-specification:'Impact Condensed';letter-spacing:0px;word-spacing:0px;fill:#2f3640;fill-opacity:1;stroke:none;stroke-width:1.08062327px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
                  xml:space="preserve"
                >
                  <tspan
                    y="24.737106"
                    x="-162.60257"
                    id="tspan4676"
                    style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:'Routed Gothic Wide';-inkscape-font-specification:'Routed Gothic Wide';stroke-width:1.08062327px"
                  >
                    S
                  </tspan>
                </text>
                <path
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                  d="m 142.27193,-9.8461594 v 3.675233"
                  id="path4680"
                />
                <path
                  id="path4682"
                  d="m 148.03122,-9.8461594 v 3.675233"
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                />
                <path
                  id="path4684"
                  d="m 142.27193,23.875135 v 3.675233"
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                />
                <path
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                  d="m 148.03122,23.875135 v 3.675233"
                  id="path4686"
                />
              </g>
              <g id="g4702">
                <text
                  xml:space="preserve"
                  style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:condensed;font-size:43.22492981px;line-height:125%;font-family:Impact;-inkscape-font-specification:'Impact Condensed';letter-spacing:0px;word-spacing:0px;fill:#2f3640;fill-opacity:1;stroke:none;stroke-width:1.08062327px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
                  x="-162.60257"
                  y="24.737106"
                  id="text4692"
                  transform="matrix(-1,0,0,1,0.2779807,8.2601048e-8)"
                >
                  <tspan
                    style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:'Routed Gothic Wide';-inkscape-font-specification:'Routed Gothic Wide';stroke-width:1.08062327px"
                    id="tspan4690"
                    x="-162.60257"
                    y="24.737106"
                  >
                    S
                  </tspan>
                </text>
                <path
                  id="path4694"
                  d="m 142.27193,-9.8461594 v 3.675233"
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                />
                <path
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                  d="m 148.03122,-9.8461594 v 3.675233"
                  id="path4696"
                />
                <path
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                  d="m 142.27193,23.875135 v 3.675233"
                  id="path4698"
                />
                <path
                  id="path4700"
                  d="m 148.03122,23.875135 v 3.675233"
                  style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                />
              </g>
            </g>
          </g>
          <g id="g4708" transform="translate(-11.875298,188.13478)" />
        </g>
      </g>
      <path
        id="path4843"
        d="m 3.1992188,148.91406 c 0,20.57715 16.5673882,37.14258 37.1445312,37.14258 h 66.61064"
        style="opacity:1;fill:none;fill-opacity:1;stroke:#2f3640;stroke-width:6.4000001;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
        transform="translate(51.085713,37.733636)"
      >
        <title id="title4841">Industry</title>
      </path>
      <flowRoot
        transform="matrix(0.93750001,0,0,0.93750001,51.085713,37.733636)"
        style="font-style:normal;font-weight:normal;font-size:40px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none"
        id="flowRoot4865"
        xml:space="preserve"
      >
        <flowRegion id="flowRegion4867">
          <rect
            y="26.511803"
            x="24.04163"
            height="50.91169"
            width="72.832001"
            id="rect4869"
          />
        </flowRegion>
        <flowPara id="flowPara4871">Onli</flowPara>
      </flowRoot>
      <path
        id="path902"
        d="m 104.75759,120.51296 49.99188,-13.39528 v 36.59555 l -50.37736,13.49857 z"
        style="fill:#f0d793;fill-opacity:1;stroke:none;stroke-width:0.9375px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
      />
      <path
        style="fill:none;fill-rule:evenodd;stroke:#2f3640;stroke-width:6.4000001;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
        d="M 156.13104,39.990777 V 220.99078"
        id="path4762"
      />
      <path
        transform="translate(51.085713,37.733636)"
        style="opacity:1;fill:#97f78a;fill-opacity:1;stroke:#2f3640;stroke-width:6.4000001;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
        d="m 40.34375,3.1992188 c -20.577143,0 -37.1445312,16.5673882 -37.1445312,37.1445312 v 108.57031 c 0,20.57715 16.5673882,37.14258 37.1445312,37.14258 H 52.595557 V 3.1992188 Z"
        id="industry"
      >
        <title id="title4876">Industry</title>
      </path>
      <text
        transform="rotate(13.114989)"
        xml:space="preserve"
        style="font-style:normal;font-weight:normal;font-size:83.49076843000000281px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#2f3640;fill-opacity:1;stroke:#e4e6eb;stroke-width:2.8125;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"
        x="123.96191"
        y="128.52333"
        id="val"
      >
        <title id="title4874">Value</title>
        <tspan
          id="tspan4737"
          x="123.96191"
          y="128.52333"
          style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:'Routed Gothic Wide';-inkscape-font-specification:'Routed Gothic Wide';stroke:#e4e6eb;stroke-width:2.8125;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"
        >
          0
        </tspan>
      </text>
      <text
        transform="matrix(0.94906248,0,0,0.94906248,9.7385894,7.000584)"
        y="3.314563"
        x="3.9774756"
        id="featureLabel"
        style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:8.10379124px;line-height:1.25;font-family:'Routed Gothic Wide';-inkscape-font-specification:'Routed Gothic Wide';letter-spacing:8.03473663px;word-spacing:0px;fill:#2f3640;fill-opacity:1;stroke:none;stroke-width:0.47634339"
        xml:space="preserve"
      >
        <textPath id="textPath908" xlink:href="#industry">
          hello
        </textPath>
      </text>
    </g>
  </svg>
</template>

<script>
import store from '@/utils/dataManager';
import * as d3 from 'd3';
import colorTools from '@/utils/colorTools';

function bindGraphic(card) {
  Object.keys(colorTools.getNameToId()).forEach((idx) => {
    const slot = card.select('#' + idx);
  });
}

function onMount() {
  const cardmodel = this.cardmodel;
  this.card = d3.select('svg#' + this.identifier);
  cardmodel.subscribe((mutation, state) => {
    if (mutation.type === 'setIndustry') {
      this.card
        .select('#featureLabel')
        .select('textPath')
        .text(state.industry);
    }
    if (mutation.type === 'setValue') {
      this.card
        .select('#val')
        .select('tspan')
        .text(parseInt(state.value, 0));
    }
    if (mutation.type === 'setSchematic') {
      const schematic = this.cardmodel.state.schematic_color;
      schematic.forEach((val, idx) => {
        const slot = this.card.select('#' + colorTools.getIdToName()[idx]);
        slot
          .style('fill', val)
          .style('fill-opacity', 0.25)
          .style('stroke', val);
      });
    }
  });

  this.cardmodel.state.schematic_color.forEach((val, idx) => {
    const slot = this.card.select('#' + colorTools.getIdToName()[idx]);
    slot
      .style('fill', val)
      .style('fill-opacity', 0.25)
      .style('stroke', val === '#fff' ? 'whitesmoke' : val);
    slot.on('click', function() {
      cardmodel.commit('setSchematic', {
        id: idx,
      });
    });
  });
}

export default {
  name: 'Industries',
  props: ['identifier', 'cardmodel'],
  mounted: onMount,
};
</script>

<style scoped>
svg > * {
  user-select: none;
}
svg {
  margin: 10px;
}
</style>
